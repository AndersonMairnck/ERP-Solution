<Window x:Class="ERPCore.Desktop.Views.PDVWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ponto de Venda (PDV)" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterOwner"
        WindowStyle="ToolWindow">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <!-- Área Esquerda - Produtos e Itens -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Scanner/Busca -->
            <Border Grid.Row="0" Background="#f5f5f5" Padding="10">
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="txtProductCode" 
                           Width="200" 
                           Height="35" 
                           Margin="0,0,10,0"
                           KeyDown="TxtProductCode_KeyDown"
                           TextChanged="TxtProductCode_TextChanged"
                           ToolTip="Digite o código do produto e pressione Enter"/>

                    <Button Content="Buscar" 
                          Click="BtnSearch_Click"
                          Width="80"
                          Height="35"
                          Margin="0,0,10,0"/>

                    <Button Content="Limpar" 
                          Click="BtnClear_Click"
                          Width="80"
                          Height="35"/>
                </StackPanel>
            </Border>

            <!-- Itens da Venda -->
            <DataGrid x:Name="GridSaleItems"
                    Grid.Row="1"
                    Margin="10"
                    AutoGenerateColumns="False"
                    IsReadOnly="True"
                    SelectionMode="Single">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Código" Binding="{Binding ProductCode}" Width="80"/>
                    <DataGridTextColumn Header="Produto" Binding="{Binding ProductName}" Width="200"/>
                    <DataGridTextColumn Header="Preço" Binding="{Binding UnitPrice, StringFormat=C}" Width="80"/>
                    <DataGridTextColumn Header="Qtd" Binding="{Binding Quantity}" Width="60"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding TotalPrice, StringFormat=C}" Width="80"/>
                    <DataGridTemplateColumn Header="Ações" Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Remover" 
                                        Click="BtnRemoveItem_Click"
                                        Padding="5,2"
                                        FontSize="10"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- Área Direita - Pagamento -->
        <Grid Grid.Column="1" Background="#f8f9fa">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Resumo -->
            <GroupBox Grid.Row="0" Header="Resumo da Venda" Margin="10">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Subtotal:" Width="100"/>
                        <TextBlock x:Name="txtSubtotal" Text="R$ 0,00" FontWeight="Bold"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Desconto:" Width="100"/>
                        <TextBox x:Name="txtDiscount" Width="80" Text="0,00" TextChanged="TxtDiscount_TextChanged"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Total:" Width="100"/>
                        <TextBlock x:Name="txtTotal" Text="R$ 0,00" FontWeight="Bold" FontSize="14"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Pagamento -->
            <GroupBox Grid.Row="1" Header="Pagamento" Margin="10">
                <StackPanel>
                    <ComboBox x:Name="cmbPaymentMethod" 
                            SelectedIndex="0"
                            Margin="0,5">
                        <ComboBoxItem Content="Dinheiro"/>
                        <ComboBoxItem Content="Cartão Débito"/>
                        <ComboBoxItem Content="Cartão Crédito"/>
                        <ComboBoxItem Content="PIX"/>
                        <ComboBoxItem Content="Transferência"/>
                    </ComboBox>

                    <StackPanel x:Name="pnlCash" Margin="0,10,0,5" Visibility="Collapsed">
                        <TextBlock Text="Valor Recebido:" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtAmountReceived" Text="0,00" TextChanged="TxtAmountReceived_TextChanged"/>

                        <TextBlock Text="Troco:" Margin="0,5,0,0"/>
                        <TextBlock x:Name="txtChange" Text="R$ 0,00" FontWeight="Bold"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Cliente -->
            <GroupBox Grid.Row="2" Header="Cliente" Margin="10">
                <StackPanel>
                    <TextBlock Text="Nome do Cliente:" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtClientName" Margin="0,0,0,10"/>

                    <TextBlock Text="CPF/CNPJ:" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtClientDocument"/>
                </StackPanel>
            </GroupBox>

            <!-- Finalizar -->
            <Button Grid.Row="3" 
                  Content="FINALIZAR VENDA" 
                  Background="#28a745"
                  Foreground="White"
                  FontWeight="Bold"
                  Height="40"
                  Margin="10"
                  VerticalAlignment="Bottom"
                  Click="BtnFinalizeSale_Click"/>
        </Grid>
    </Grid>
</Window>