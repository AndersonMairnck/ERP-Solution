<Window x:Class="ERPCore.Desktop.Views.PDVWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PDV - Ponto de Venda" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterOwner">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <!-- Área de Produtos -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Scanner -->
            <Border Grid.Row="0" Background="#f5f5f5" Padding="10">
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="ProductCodeTextBox" 
                           Width="200" 
                           Height="35" 
                           Margin="0,0,10,0"
                           ToolTip="Digite o código do produto e pressione Enter"/>
                    <Button Content="Escanear" 
                          Click="ScanButton_Click"
                          Background="#007bff"
                          Foreground="White"
                          BorderBrush="#007bff"
                          Padding="10,5"/>
                </StackPanel>
            </Border>

            <!-- Itens da Venda -->
            <DataGrid x:Name="SaleItemsDataGrid"
                    Grid.Row="1"
                    AutoGenerateColumns="False"
                    IsReadOnly="True"
                    SelectionMode="Single">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Código" Binding="{Binding ProductCode}" Width="80"/>
                    <DataGridTextColumn Header="Produto" Binding="{Binding ProductName}" Width="*"/>
                    <DataGridTextColumn Header="Preço" Binding="{Binding UnitPrice, StringFormat=C}" Width="80"/>
                    <DataGridTextColumn Header="Qtd" Binding="{Binding Quantity}" Width="60"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding TotalPrice, StringFormat=C}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- Área de Pagamento -->
        <Grid Grid.Column="1" Background="#f5f5f5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Resumo -->
            <GroupBox Grid.Row="0" Header="Resumo da Venda" Margin="10">
                <StackPanel>
                    <TextBlock Text="{Binding Subtotal, StringFormat='Subtotal: {0:C}'}" Margin="0,5"/>
                    <TextBlock Text="{Binding Discount, StringFormat='Desconto: {0:C}'}" Margin="0,5"/>
                    <TextBlock Text="{Binding Total, StringFormat='Total: {0:C}'}" 
                             FontWeight="Bold" Margin="0,5"/>
                </StackPanel>
            </GroupBox>

            <!-- Pagamento -->
            <GroupBox Grid.Row="1" Header="Pagamento" Margin="10">
                <StackPanel>
                    <ComboBox x:Name="PaymentMethodComboBox" 
                            SelectedIndex="0"
                            Margin="0,5">
                        <ComboBoxItem Content="Dinheiro"/>
                        <ComboBoxItem Content="Cartão Crédito"/>
                        <ComboBoxItem Content="Cartão Débito"/>
                        <ComboBoxItem Content="PIX"/>
                    </ComboBox>

                    <TextBox x:Name="AmountReceivedTextBox" 
                           Visibility="Collapsed"
                           Text="0,00"
                           Margin="0,5"/>

                    <TextBlock x:Name="ChangeTextBlock" 
                             Visibility="Collapsed"
                             Margin="0,5"/>
                </StackPanel>
            </GroupBox>

            <!-- Finalizar -->
            <Button Grid.Row="2" 
                  Content="FINALIZAR VENDA" 
                  Background="#28a745"
                  Foreground="White"
                  BorderBrush="#28a745"
                  Margin="10"
                  VerticalAlignment="Bottom"
                  Click="FinalizeSaleButton_Click"/>
        </Grid>
    </Grid>
</Window>